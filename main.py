import os
import telebot

# --- 1. –ù–ê–°–¢–†–û–ô–ö–ê –ò –ó–ê–ì–†–£–ó–ö–ê –¢–û–ö–ï–ù–ê ---
TOKEN = os.environ.get('BOT_TOKEN')

bot = telebot.TeleBot(TOKEN)


# --- 2. –û–ë–†–ê–ë–û–¢–ß–ò–ö /start ---
@bot.message_handler(commands=['start'])
def send_welcome(message):
    welcome_text = "–ü—Ä–∏–≤–µ—Ç! –Ø —Ç–≤–æ–π –ø–æ–º–æ—â–Ω–∏–∫ –ø–æ –ò—Ä–ª–∞–Ω–¥–∏–∏. –¢—ã –º–æ–∂–µ—à—å —Å–ø—Ä–æ—Å–∏—Ç—å –º–µ–Ω—è –æ –î—É–±–ª–∏–Ω–µ –∏–ª–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∫–æ–º–∞–Ω–¥—ã."
    bot.send_message(message.chat.id, welcome_text)


# --- 3. –û–ë–†–ê–ë–û–¢–ß–ò–ö –£–î–ê–õ–ï–ù–ò–Ø ("–ü–†–û–î–ê–ú") üóëÔ∏è ---
SELL_KEYWORDS = ['–ø—Ä–æ–¥–∞–º', '–ø—Ä–æ–¥–∞–µ—Ç—Å—è', '–ø—Ä–æ–¥–∞—î—Ç—å—Å—è', '–ø—Ä–æ–¥–∞—é—Ç—Å—è']

@bot.message_handler(func=lambda message: any(keyword in message.text.lower() for keyword in SELL_KEYWORDS))
def handle_selling_post(message):
    try:
        # --- –ù–û–í–´–ï –°–¢–†–û–ö–ò –î–õ–Ø –¢–ï–ì–ò–†–û–í–ê–ù–ò–Ø ---
        # 1. –ü–æ–ª—É—á–∞–µ–º ID –∏ –∏–º—è –æ—Ç–ø—Ä–∞–≤–∏—Ç–µ–ª—è
        user_id = message.from_user.id
        user_name = message.from_user.first_name 

        # 2. –°–æ–∑–¥–∞–µ–º —Ç–µ–≥ –≤ —Ñ–æ—Ä–º–∞—Ç–µ Markdown: [–ò–º—è](tg://user?id=ID)
        user_mention = f"[{user_name}](tg://user?id={user_id})"
        # --- –ö–û–ù–ï–¶ –ù–û–í–´–• –°–¢–†–û–ö ---

        # –£–¥–∞–ª—è–µ–º –∏—Å—Ö–æ–¥–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ
        bot.delete_message(message.chat.id, message.message_id) 

        # –¢–µ–∫—Å—Ç —Å —É–ø–æ–º–∏–Ω–∞–Ω–∏–µ–º (–æ–±—Ä–∞—Ç–∏—Ç–µ –≤–Ω–∏–º–∞–Ω–∏–µ –Ω–∞ f –ø–µ—Ä–µ–¥ —Å–∫–æ–±–∫–æ–π!)
        warning_text = (
            f"üö´ {user_mention}, –æ–±—ä—è–≤–ª–µ–Ω–∏–µ –æ –ø—Ä–æ–¥–∞–∂–µ —É–¥–∞–ª–µ–Ω—ã.\n\n" 
            "–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, —Ä–∞–∑–º–µ—â–∞–π—Ç–µ —Å–æ–æ–±—â–µ–Ω–∏—è –æ –ø—Ä–æ–¥–∞–∂–µ —Ç–æ–≤–∞—Ä–æ–≤ —Ç–æ–ª—å–∫–æ –≤ —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –∫–∞–Ω–∞–ª–∞—Ö-–±–∞—Ä–∞—Ö–æ–ª–∫–∞—Ö.\n\n"
            "üõí –í–æ—Ç —Å—Å—ã–ª–∫–∏, –≥–¥–µ –≤—ã –º–æ–∂–µ—Ç–µ —Ä–∞–∑–º–µ—Å—Ç–∏—Ç—å —Å–≤–æ–µ –æ–±—ä—è–≤–ª–µ–Ω–∏–µ:\n"
            "‚Ä¢ [–ë–∞—Ä–∞—Ö–æ–ª–∫–∞ –ò—Ä–ª–∞–Ω–¥–∏–∏](https://t.me/buy_sell_ireland)\n"
            "‚Ä¢ [–û–±—ä—è–≤–ª–µ–Ω–∏—è –û–¥–µ—Å—Å–∞-–ò—Ä–ª–∞–Ω–¥–∏—è](https://t.me/Odessa_IE/3806)"
        )

        bot.send_message(message.chat.id, warning_text, parse_mode="Markdown")

    except Exception as e:
        print(f"–û—à–∏–±–∫–∞ –ø—Ä–∏ —É–¥–∞–ª–µ–Ω–∏–∏ —Å–æ–æ–±—â–µ–Ω–∏—è. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∞ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞ —É –±–æ—Ç–∞: {e}")


# --- 4. –û–ë–†–ê–ë–û–¢–ß–ò–ö CITYWEST (–º–Ω–æ–≥–æ—è–∑—ã—á–Ω—ã–π –ø–æ–∏—Å–∫) ---
@bot.message_handler(func=lambda message: any(keyword in message.text.lower() for keyword in ['citywest', '—Å–∏—Ç–∏–≤–µ—Å—Ç', '—Å–∏—Ç–∏—É–µ—Å—Ç', '—Å–≤—Ç—ñ–≤–µ—Å—Ç']))
def handle_citywest(message):
    response_text = (
        "üè® **–¶–µ–Ω—Ç—Ä –ø—Ä–∏–µ–º–∞ –±–µ–∂–µ–Ω—Ü–µ–≤ Citywest Convention Centre**\n"
        "–ê–¥—Ä–µ—Å: Garters Lane, Saggart, Co Dublin, D24 A38Y "
        "(–¥–æ–±—Ä–∞—Ç—å—Å—è –¥–æ –Ω–µ–≥–æ –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑—É—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ, –Ω–∞–ø—Ä–∏–º–µ—Ä Google –ö–∞—Ä—Ç—ã).\n\n"
        "üìÖ **–ì—Ä–∞—Ñ–∏–∫ —Ä–∞–±–æ—Ç—ã:**\n"
        "  ‚Ä¢ **–ü–æ–¥–∞—á–∞ –Ω–∞ –ø–æ–ª—É—á–µ–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–Ω–æ–π –∑–∞—â–∏—Ç—ã**: –ø–æ–Ω–µ–¥–µ–ª—å–Ω–∏–∫-–ø—è—Ç–Ω–∏—Ü–∞ 08:00-14:30\n"
        "  ‚Ä¢ **–û–±—Ä–∞—â–µ–Ω–∏—è –ø–æ –ø–æ–≤–æ–¥—É –∂–∏–ª—å—è**: –ø–æ–Ω–µ–¥–µ–ª—å–Ω–∏–∫-–ø—è—Ç–Ω–∏—Ü–∞ 09:00-16:00\n"
        "  ‚Ä¢ **–û—Ç–∫–∞–∑ –æ—Ç –≤—Ä–µ–º–µ–Ω–Ω–æ–π –∑–∞—â–∏—Ç—ã / —Å–¥–∞—á–∞ –æ—Ç–ø–µ—á–∞—Ç–∫–æ–≤**: –ø–æ–Ω–µ–¥–µ–ª—å–Ω–∏–∫-–≤–æ—Å–∫—Ä–µ—Å–µ–Ω—å–µ 08:00-17:00"
    )
    bot.send_message(message.chat.id, response_text, parse_mode="Markdown")


# --- 5. –û–ë–†–ê–ë–û–¢–ß–ò–ö –ì–ò–ù–ù–ï–°–° ---
@bot.message_handler(func=lambda message: any(keyword in message.text.lower() for keyword in ['–≥–∏–Ω–Ω–µ—Å—Å', '–ø–∏–≤–æ', 'guinness', '–≥—ñ–Ω–µ—Å', '–≥—ñ–Ω–Ω–µ—Å', '–ø–∏–≤—É', '–≥–∏–Ω–µ—Å', '–≥—ñ–Ω–Ω–µ—Å', '–≥–∏–Ω–Ω–µ—Å']))
def handle_guinness(message):
    guinness_text = "–ì–∏–Ω–Ω–µ—Å—Å (Guinness) ‚Äî –ª–µ–≥–µ–Ω–¥–∞—Ä–Ω—ã–π –∏—Ä–ª–∞–Ω–¥—Å–∫–∏–π —Å—Ç–∞—É—Ç. –ì–ª–∞–≤–Ω–∞—è –ø–∏–≤–æ–≤–∞—Ä–Ω—è –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ –î—É–±–ª–∏–Ω–µ, –Ω–∞ –°–µ–Ω—Ç-–î–∂–µ–π–º—Å –ì–µ–π—Ç. –ï–≥–æ —á–∞—Å—Ç–æ –Ω–∞–∑—ã–≤–∞—é—Ç '–∂–∏–¥–∫–∏–º —Ö–ª–µ–±–æ–º –ò—Ä–ª–∞–Ω–¥–∏–∏'! Cheers üáÆüá™"
    bot.send_message(message.chat.id, guinness_text)


# --- 6. –û–ë–†–ê–ë–û–¢–ß–ò–ö –î–£–ë–õ–ò–ù ---
@bot.message_handler(func=lambda message: '–¥—É–±–ª–∏–Ω' in message.text.lower())
def handle_dublin(message):
    dublin_text = "–î—É–±–ª–∏–Ω (Dublin) ‚Äî —Å—Ç–æ–ª–∏—Ü–∞ –∏ –∫—Ä—É–ø–Ω–µ–π—à–∏–π –≥–æ—Ä–æ–¥ –ò—Ä–ª–∞–Ω–¥–∏–∏. –ì–æ—Ä–æ–¥ —Ä–∞—Å–ø–æ–ª–æ–∂–µ–Ω –Ω–∞ –≤–æ—Å—Ç–æ—á–Ω–æ–º –ø–æ–±–µ—Ä–µ–∂—å–µ, –≤ —É—Å—Ç—å–µ —Ä–µ–∫–∏ –õ–∏—Ñ—Ñ–∏. –ù–∞—Å–µ–ª–µ–Ω–∏–µ —Å–æ—Å—Ç–∞–≤–ª—è–µ—Ç –æ–∫–æ–ª–æ 1.2 –º–∏–ª–ª–∏–æ–Ω–∞ —á–µ–ª–æ–≤–µ–∫."
    bot.send_message(message.chat.id, dublin_text)


# --- 7. –ó–ê–ü–£–°–ö –ë–û–¢–ê ---
# –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ /visa –∏ —ç—Ö–æ (default_response) —É–¥–∞–ª–µ–Ω—ã.
print("Bot is running...")
bot.infinity_polling()
